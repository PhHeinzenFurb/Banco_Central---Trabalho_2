[
  {
    "objectID": "Estudo_criação_mapa.html",
    "href": "Estudo_criação_mapa.html",
    "title": "R Notebook",
    "section": "",
    "text": "O objetivo da seguinte análise é complementar a taxa de endividamento das famílias - a qual é a premissa inicial do trabalho - com as operações de crédito em cada uma das regiões do Brasil, assim como avaliar a taxa de inadimplência em cada um deles.\n\n\n\nA informação será destacada através de um mapa interativo. A interação deverá se dar através do usuário passando a seta por cima da região, assim como uma animação por ano.\n\n\n\n\n14087: Saldo das operações de crédito do Sistema Financeiro Nacional - Região Sul - Pessoas físicas\n15892: Taxa de inadimplência das operações de crédito do Sistema Financeiro Nacional - Região Sul - Pessoas físicas\n14086: Saldo das operações de crédito do Sistema Financeiro Nacional - Região Sudeste - Pessoas físicas\n15891: Taxa de inadimplência das operações de crédito do Sistema Financeiro Nacional - Região Sudeste - Pessoas físicas\n14085: Saldo das operações de crédito do Sistema Financeiro Nacional - Região Centro-Oeste - Pessoas físicas\n15890: Taxa de inadimplência das operações de crédito do Sistema Financeiro Nacional - Região Centro-Oeste - Pessoas físicas\n14084: Saldo das operações de crédito do Sistema Financeiro Nacional - Região Nordeste - Pessoas físicas\n15889: completo Taxa de inadimplência das operações de crédito do Sistema Financeiro Nacional - Região Nordeste - Pessoas físicas\n14083: Saldo das operações de crédito do Sistema Financeiro Nacional - Região Norte - Pessoas físicas\n15888: Taxa de inadimplência das operações de crédito do Sistema Financeiro Nacional - Região Norte - Pessoas físicas\n\n\nlibrary(GetBCBData)\n\nWarning: pacote 'GetBCBData' foi compilado no R versão 4.4.3\n\nlibrary(tidyverse)\n\nWarning: pacote 'tidyverse' foi compilado no R versão 4.4.3\n\n\nWarning: pacote 'ggplot2' foi compilado no R versão 4.4.3\n\n\nWarning: pacote 'tibble' foi compilado no R versão 4.4.3\n\n\nWarning: pacote 'tidyr' foi compilado no R versão 4.4.3\n\n\nWarning: pacote 'readr' foi compilado no R versão 4.4.3\n\n\nWarning: pacote 'purrr' foi compilado no R versão 4.4.3\n\n\nWarning: pacote 'dplyr' foi compilado no R versão 4.4.3\n\n\nWarning: pacote 'stringr' foi compilado no R versão 4.4.3\n\n\nWarning: pacote 'forcats' foi compilado no R versão 4.4.3\n\n\nWarning: pacote 'lubridate' foi compilado no R versão 4.4.3\n\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.2     ✔ tibble    3.2.1\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.0.4     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(lubridate)\n\n\n# FUNÇÃO PARA EXTRAIR OS DADOS DO BCB VIA BIBLIOTECA GetBCBData\nget_bcb_data &lt;- function(id, first_date){\n  gbcbd_get_series(\n    id = id,\n    first.date = first_date,\n    last.date = Sys.Date(),\n    format.data = \"long\",\n    use.memoise = TRUE,\n    cache.path = tempdir(),\n    do.parallel = FALSE\n  )\n}\n\n# FUNÇÃO PARA TRATAMENTO PADRÃO DOS DADOS GERADOS POR get_bcb_data\ndf_bcb_format &lt;- function(df){\n  df |&gt;\n    select(-id.num) |&gt;\n    pivot_wider(\n      names_from = series.name,\n      values_from = value\n    )\n}\n\n\n\n\n# criando lista para códigos dos saldo das operações de crédito\nids_saldo &lt;- c(\"Saldo das Operações de Crédito - Sul\" = 14087,\n               \"Saldo das Operações de Crédito - Sudeste\" = 14086,\n               \"Saldo das Operações de Crédito - Centro-Oeste\" = 14085,\n               \"Saldo das Operações de Crédito - Nordeste\" = 14084,\n               \"Saldo das Operações de Crédito - Norte\" = 14083)\n\n\n# criando df para os saldos de operações de crédito em cada região\ndf_saldosCred_regioes &lt;- get_bcb_data(ids_saldo, \"2012-02-01\")\n\nℹ using sequential data fetching for 5 time periods\n\n\nℹ Fetching Saldo das Operações de Crédito - Sul [id=14087] | 2012-02-01 -&gt; 2015-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Sul [id=14087] | 2015-02-01 -&gt; 2018-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Sul [id=14087] | 2018-02-01 -&gt; 2021-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Sul [id=14087] | 2021-02-01 -&gt; 2024-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Sul [id=14087] | 2024-02-01 -&gt; 2025-05-31\n\n\n✔ got data with 158 rows and 4 columns\n\n\nℹ using sequential data fetching for 5 time periods\n\n\nℹ Fetching Saldo das Operações de Crédito - Sudeste [id=14086] | 2012-02-01 -&gt; 2015-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Sudeste [id=14086] | 2015-02-01 -&gt; 2018-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Sudeste [id=14086] | 2018-02-01 -&gt; 2021-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Sudeste [id=14086] | 2021-02-01 -&gt; 2024-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Sudeste [id=14086] | 2024-02-01 -&gt; 2025-05-31\n\n\n✔ got data with 158 rows and 4 columns\n\n\nℹ using sequential data fetching for 5 time periods\n\n\nℹ Fetching Saldo das Operações de Crédito - Centro-Oeste [id=14085] | 2012-02-01 -&gt; 2015-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Centro-Oeste [id=14085] | 2015-02-01 -&gt; 2018-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Centro-Oeste [id=14085] | 2018-02-01 -&gt; 2021-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Centro-Oeste [id=14085] | 2021-02-01 -&gt; 2024-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Centro-Oeste [id=14085] | 2024-02-01 -&gt; 2025-05-31\n\n\n✔ got data with 158 rows and 4 columns\n\n\nℹ using sequential data fetching for 5 time periods\n\n\nℹ Fetching Saldo das Operações de Crédito - Nordeste [id=14084] | 2012-02-01 -&gt; 2015-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Nordeste [id=14084] | 2015-02-01 -&gt; 2018-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Nordeste [id=14084] | 2018-02-01 -&gt; 2021-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Nordeste [id=14084] | 2021-02-01 -&gt; 2024-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Nordeste [id=14084] | 2024-02-01 -&gt; 2025-05-31\n\n\n✔ got data with 158 rows and 4 columns\n\n\nℹ using sequential data fetching for 5 time periods\n\n\nℹ Fetching Saldo das Operações de Crédito - Norte [id=14083] | 2012-02-01 -&gt; 2015-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Norte [id=14083] | 2015-02-01 -&gt; 2018-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Norte [id=14083] | 2018-02-01 -&gt; 2021-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Norte [id=14083] | 2021-02-01 -&gt; 2024-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Norte [id=14083] | 2024-02-01 -&gt; 2025-05-31\n\n\n✔ got data with 158 rows and 4 columns\n\n\nℹ \n\n\n\n# detectando parte de uma string na coluna series.name atraves de str_detect()\n# criando a coluna regioes através das condições\n# extraindo ano e mes da coluna ref.date\n# renomeando a coluna \"value\"\n# filtrando o saldo para o mes 12\n# retirando as colunas ref.date, is.num, series.name\ndf_saldoCred_regioes_alter &lt;- df_saldosCred_regioes |&gt;\n  mutate(\n  name_region = case_when(\n    str_detect(series.name, \"Sul\") ~ \"Sul\",\n    str_detect(series.name, \"Sudeste\") ~ \"Sudeste\",\n    str_detect(series.name, \"Centro-Oeste\") ~ \"Centro Oeste\",\n    str_detect(series.name, \"Nordeste\") ~ \"Nordeste\",\n    str_detect(series.name, \"Norte\") ~ \"Norte\",\n  ),\n  mes = month(ref.date),\n  ano = year(ref.date)\n  ) |&gt;\n  rename(`saldo_operações_crédito(R$ milhões)` = value) |&gt;\n  filter(mes == 12) |&gt;\n  select(-c(ref.date, id.num, series.name))\n\n\ndf_saldoCred_regioes_alter\n\n# A tibble: 65 × 4\n   `saldo_operações_crédito(R$ milhões)` name_region   mes   ano\n                                   &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;\n 1                                204754 Sul            12  2012\n 2                                242531 Sul            12  2013\n 3                                279717 Sul            12  2014\n 4                                299153 Sul            12  2015\n 5                                312257 Sul            12  2016\n 6                                332203 Sul            12  2017\n 7                                361708 Sul            12  2018\n 8                                401493 Sul            12  2019\n 9                                447881 Sul            12  2020\n10                                537545 Sul            12  2021\n# ℹ 55 more rows\n\n\n\n\n\n\n# criando lista para códigos dos saldo das operações de crédito\nids_inad &lt;- c(\"Inadimplencia nas Operações de Crédito - Sul\" = 15892,\n              \"Inadimplencia nas Operações de Crédito - Sudeste\" = 15891,\n              \"Inadimplencia nas Operações de Crédito - Centro-Oeste\" = 15890,\n              \"Inadimplencia nas Operações de Crédito - Nordeste\" = 15889,\n              \"Inadimplencia nas Operações de Crédito - Norte\" = 15888)\n\n\n# criando df para inadimplencia em cada região\ndf_inad_regioes &lt;- get_bcb_data(ids_inad, \"2012-02-01\")\n\nℹ using sequential data fetching for 5 time periods\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Sul [id=15892] | 2012-02-01 -&gt; 2015-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Sul [id=15892] | 2015-02-01 -&gt; 2018-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Sul [id=15892] | 2018-02-01 -&gt; 2021-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Sul [id=15892] | 2021-02-01 -&gt; 2024-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Sul [id=15892] | 2024-02-01 -&gt; 2025-05-31\n\n\n✔ got data with 158 rows and 4 columns\n\n\nℹ using sequential data fetching for 5 time periods\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Sudeste [id=15891] | 2012-02-01 -&gt; 2015-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Sudeste [id=15891] | 2015-02-01 -&gt; 2018-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Sudeste [id=15891] | 2018-02-01 -&gt; 2021-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Sudeste [id=15891] | 2021-02-01 -&gt; 2024-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Sudeste [id=15891] | 2024-02-01 -&gt; 2025-05-31\n\n\n✔ got data with 158 rows and 4 columns\n\n\nℹ using sequential data fetching for 5 time periods\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Centro-Oeste [id=15890] | 2012-02-01 -&gt; 2015-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Centro-Oeste [id=15890] | 2015-02-01 -&gt; 2018-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Centro-Oeste [id=15890] | 2018-02-01 -&gt; 2021-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Centro-Oeste [id=15890] | 2021-02-01 -&gt; 2024-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Centro-Oeste [id=15890] | 2024-02-01 -&gt; 2025-05-31\n\n\n✔ got data with 158 rows and 4 columns\n\n\nℹ using sequential data fetching for 5 time periods\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Nordeste [id=15889] | 2012-02-01 -&gt; 2015-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Nordeste [id=15889] | 2015-02-01 -&gt; 2018-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Nordeste [id=15889] | 2018-02-01 -&gt; 2021-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Nordeste [id=15889] | 2021-02-01 -&gt; 2024-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Nordeste [id=15889] | 2024-02-01 -&gt; 2025-05-31\n\n\n✔ got data with 158 rows and 4 columns\n\n\nℹ using sequential data fetching for 5 time periods\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Norte [id=15888] | 2012-02-01 -&gt; 2015-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Norte [id=15888] | 2015-02-01 -&gt; 2018-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Norte [id=15888] | 2018-02-01 -&gt; 2021-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Norte [id=15888] | 2021-02-01 -&gt; 2024-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Norte [id=15888] | 2024-02-01 -&gt; 2025-05-31\n\n\n✔ got data with 158 rows and 4 columns\n\n\nℹ \n\n\n\n# detectando parte de uma string na coluna series.name atraves de str_detect()\n# criando a coluna regioes através das condições\n# extraindo ano e mes da coluna ref.date\n# renomeando a coluna \"value\"\n# filtrando o saldo para o mes 12\n# retirando as colunas ref.date, is.num, series.name\ndf_inad_regioes_alter &lt;- df_inad_regioes |&gt;\n  mutate(\n  name_region = case_when(\n    str_detect(series.name, \"Sul\") ~ \"Sul\",\n    str_detect(series.name, \"Sudeste\") ~ \"Sudeste\",\n    str_detect(series.name, \"Centro-Oeste\") ~ \"Centro Oeste\",\n    str_detect(series.name, \"Nordeste\") ~ \"Nordeste\",\n    str_detect(series.name, \"Norte\") ~ \"Norte\",\n  ),\n  mes = month(ref.date),\n  ano = year(ref.date)\n  ) |&gt;\n  rename(`inadimplencia_operações_crédito(%)` = value) |&gt;\n  filter(mes == 12) |&gt;\n  select(-c(ref.date, id.num, series.name))\n\n\ndf_inad_regioes_alter\n\n# A tibble: 65 × 4\n   `inadimplencia_operações_crédito(%)` name_region   mes   ano\n                                  &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;\n 1                                 3.58 Sul            12  2012\n 2                                 2.81 Sul            12  2013\n 3                                 2.51 Sul            12  2014\n 4                                 3.08 Sul            12  2015\n 5                                 2.65 Sul            12  2016\n 6                                 2.41 Sul            12  2017\n 7                                 2.25 Sul            12  2018\n 8                                 2.5  Sul            12  2019\n 9                                 1.92 Sul            12  2020\n10                                 2.11 Sul            12  2021\n# ℹ 55 more rows\n\n\n\n\n\n\n# chamando biblioteca geobr com dados espaciais do brasil\n# sf para plotagem de mapas\nlibrary(geobr)\n\nWarning: pacote 'geobr' foi compilado no R versão 4.4.3\n\n\nCarregando namespace exigido: sf\n\nlibrary(sf)\n\nWarning: pacote 'sf' foi compilado no R versão 4.4.3\n\n\nLinking to GEOS 3.13.0, GDAL 3.10.1, PROJ 9.5.1; sf_use_s2() is TRUE\n\n\n\n# trabalhando com os dados de saldo das operações de crédito\nmapa_regiao &lt;- read_region(year = 2020)\n\nUsing year/date 2020\n\n\n\n# left join com regiao para mesclar as tabelas de operações e dados geoespaciais\ndf_saldoCred_regioes_geo &lt;- mapa_regiao |&gt;\n  left_join(df_saldoCred_regioes_alter, by = \"name_region\")\n\n\nggplot(filter(df_saldoCred_regioes_geo, ano == 2024)) +\n  geom_sf(aes(fill = `saldo_operações_crédito(R$ milhões)`))\n\n\n\n\n\n\n\n\n\n\n\n\n# chamando bibliotecas necessárias interatividade\nlibrary(ggiraph) # programa a interatividade\n\nWarning: pacote 'ggiraph' foi compilado no R versão 4.4.3\n\nlibrary(patchwork) # une diferentes tipos de gráficos\n\nWarning: pacote 'patchwork' foi compilado no R versão 4.4.3\n\n\n\n# criando mapa base para a interatividade\np1 &lt;- ggplot() +\n  geom_sf(data = filter(df_saldoCred_regioes_geo, ano == 2024),\n          fill = \"lightgrey\", color = \"lightgrey\") +\n  geom_sf_interactive(data = filter(df_saldoCred_regioes_geo, ano == 2024),\n                      aes(fill = name_region,\n                          tooltip = name_region,\n                          data_id = name_region)) +\n  coord_sf(crs = st_crs(3857)) +\n  theme_void() +\n  theme(\n    axis.title.x = element_blank(),\n    axis.title.y = element_blank(),\n    legend.position = \"none\"\n  )\n\n\n# criando geom_col com os valores de cada regiao\np2 &lt;- ggplot(df_saldoCred_regioes_geo, \n                          aes(\n                            x = reorder(name_region, `saldo_operações_crédito(R$ milhões)`),\n                            y = `saldo_operações_crédito(R$ milhões)`,\n                            tooltip = name_region,\n                            data_id = name_region,\n                            fill = name_region)\n                          ) +\n  geom_col_interactive(data = filter(df_saldoCred_regioes_geo, ano == 2024)) +\n  coord_flip() + \n  theme_minimal() +\n  theme(\n    axis.title.x = element_blank(),\n    axis.title.y = element_blank(),\n    legend.position = \"none\"\n  )\n\n\n# combinando os dois gráficos \ncombined_plot &lt;- p1 + p2\n\n\n# criando a interatividade\nmapa_int &lt;- girafe(ggobj = combined_plot)\nmapa_int &lt;- girafe_options(\n  mapa_int,\n  opts_hover(css = \"fill:red;stroke:black\")\n) \n\n\nmapa_int"
  },
  {
    "objectID": "Estudo_criação_mapa.html#objetivo",
    "href": "Estudo_criação_mapa.html#objetivo",
    "title": "R Notebook",
    "section": "",
    "text": "O objetivo da seguinte análise é complementar a taxa de endividamento das famílias - a qual é a premissa inicial do trabalho - com as operações de crédito em cada uma das regiões do Brasil, assim como avaliar a taxa de inadimplência em cada um deles."
  },
  {
    "objectID": "Estudo_criação_mapa.html#plotagem",
    "href": "Estudo_criação_mapa.html#plotagem",
    "title": "R Notebook",
    "section": "",
    "text": "A informação será destacada através de um mapa interativo. A interação deverá se dar através do usuário passando a seta por cima da região, assim como uma animação por ano."
  },
  {
    "objectID": "Estudo_criação_mapa.html#códigos-utilizados",
    "href": "Estudo_criação_mapa.html#códigos-utilizados",
    "title": "R Notebook",
    "section": "",
    "text": "14087: Saldo das operações de crédito do Sistema Financeiro Nacional - Região Sul - Pessoas físicas\n15892: Taxa de inadimplência das operações de crédito do Sistema Financeiro Nacional - Região Sul - Pessoas físicas\n14086: Saldo das operações de crédito do Sistema Financeiro Nacional - Região Sudeste - Pessoas físicas\n15891: Taxa de inadimplência das operações de crédito do Sistema Financeiro Nacional - Região Sudeste - Pessoas físicas\n14085: Saldo das operações de crédito do Sistema Financeiro Nacional - Região Centro-Oeste - Pessoas físicas\n15890: Taxa de inadimplência das operações de crédito do Sistema Financeiro Nacional - Região Centro-Oeste - Pessoas físicas\n14084: Saldo das operações de crédito do Sistema Financeiro Nacional - Região Nordeste - Pessoas físicas\n15889: completo Taxa de inadimplência das operações de crédito do Sistema Financeiro Nacional - Região Nordeste - Pessoas físicas\n14083: Saldo das operações de crédito do Sistema Financeiro Nacional - Região Norte - Pessoas físicas\n15888: Taxa de inadimplência das operações de crédito do Sistema Financeiro Nacional - Região Norte - Pessoas físicas\n\n\nlibrary(GetBCBData)\n\nWarning: pacote 'GetBCBData' foi compilado no R versão 4.4.3\n\nlibrary(tidyverse)\n\nWarning: pacote 'tidyverse' foi compilado no R versão 4.4.3\n\n\nWarning: pacote 'ggplot2' foi compilado no R versão 4.4.3\n\n\nWarning: pacote 'tibble' foi compilado no R versão 4.4.3\n\n\nWarning: pacote 'tidyr' foi compilado no R versão 4.4.3\n\n\nWarning: pacote 'readr' foi compilado no R versão 4.4.3\n\n\nWarning: pacote 'purrr' foi compilado no R versão 4.4.3\n\n\nWarning: pacote 'dplyr' foi compilado no R versão 4.4.3\n\n\nWarning: pacote 'stringr' foi compilado no R versão 4.4.3\n\n\nWarning: pacote 'forcats' foi compilado no R versão 4.4.3\n\n\nWarning: pacote 'lubridate' foi compilado no R versão 4.4.3\n\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.2     ✔ tibble    3.2.1\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.0.4     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(lubridate)\n\n\n# FUNÇÃO PARA EXTRAIR OS DADOS DO BCB VIA BIBLIOTECA GetBCBData\nget_bcb_data &lt;- function(id, first_date){\n  gbcbd_get_series(\n    id = id,\n    first.date = first_date,\n    last.date = Sys.Date(),\n    format.data = \"long\",\n    use.memoise = TRUE,\n    cache.path = tempdir(),\n    do.parallel = FALSE\n  )\n}\n\n# FUNÇÃO PARA TRATAMENTO PADRÃO DOS DADOS GERADOS POR get_bcb_data\ndf_bcb_format &lt;- function(df){\n  df |&gt;\n    select(-id.num) |&gt;\n    pivot_wider(\n      names_from = series.name,\n      values_from = value\n    )\n}\n\n\n\n\n# criando lista para códigos dos saldo das operações de crédito\nids_saldo &lt;- c(\"Saldo das Operações de Crédito - Sul\" = 14087,\n               \"Saldo das Operações de Crédito - Sudeste\" = 14086,\n               \"Saldo das Operações de Crédito - Centro-Oeste\" = 14085,\n               \"Saldo das Operações de Crédito - Nordeste\" = 14084,\n               \"Saldo das Operações de Crédito - Norte\" = 14083)\n\n\n# criando df para os saldos de operações de crédito em cada região\ndf_saldosCred_regioes &lt;- get_bcb_data(ids_saldo, \"2012-02-01\")\n\nℹ using sequential data fetching for 5 time periods\n\n\nℹ Fetching Saldo das Operações de Crédito - Sul [id=14087] | 2012-02-01 -&gt; 2015-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Sul [id=14087] | 2015-02-01 -&gt; 2018-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Sul [id=14087] | 2018-02-01 -&gt; 2021-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Sul [id=14087] | 2021-02-01 -&gt; 2024-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Sul [id=14087] | 2024-02-01 -&gt; 2025-05-31\n\n\n✔ got data with 158 rows and 4 columns\n\n\nℹ using sequential data fetching for 5 time periods\n\n\nℹ Fetching Saldo das Operações de Crédito - Sudeste [id=14086] | 2012-02-01 -&gt; 2015-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Sudeste [id=14086] | 2015-02-01 -&gt; 2018-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Sudeste [id=14086] | 2018-02-01 -&gt; 2021-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Sudeste [id=14086] | 2021-02-01 -&gt; 2024-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Sudeste [id=14086] | 2024-02-01 -&gt; 2025-05-31\n\n\n✔ got data with 158 rows and 4 columns\n\n\nℹ using sequential data fetching for 5 time periods\n\n\nℹ Fetching Saldo das Operações de Crédito - Centro-Oeste [id=14085] | 2012-02-01 -&gt; 2015-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Centro-Oeste [id=14085] | 2015-02-01 -&gt; 2018-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Centro-Oeste [id=14085] | 2018-02-01 -&gt; 2021-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Centro-Oeste [id=14085] | 2021-02-01 -&gt; 2024-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Centro-Oeste [id=14085] | 2024-02-01 -&gt; 2025-05-31\n\n\n✔ got data with 158 rows and 4 columns\n\n\nℹ using sequential data fetching for 5 time periods\n\n\nℹ Fetching Saldo das Operações de Crédito - Nordeste [id=14084] | 2012-02-01 -&gt; 2015-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Nordeste [id=14084] | 2015-02-01 -&gt; 2018-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Nordeste [id=14084] | 2018-02-01 -&gt; 2021-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Nordeste [id=14084] | 2021-02-01 -&gt; 2024-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Nordeste [id=14084] | 2024-02-01 -&gt; 2025-05-31\n\n\n✔ got data with 158 rows and 4 columns\n\n\nℹ using sequential data fetching for 5 time periods\n\n\nℹ Fetching Saldo das Operações de Crédito - Norte [id=14083] | 2012-02-01 -&gt; 2015-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Norte [id=14083] | 2015-02-01 -&gt; 2018-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Norte [id=14083] | 2018-02-01 -&gt; 2021-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Norte [id=14083] | 2021-02-01 -&gt; 2024-02-01\n\n\nℹ Fetching Saldo das Operações de Crédito - Norte [id=14083] | 2024-02-01 -&gt; 2025-05-31\n\n\n✔ got data with 158 rows and 4 columns\n\n\nℹ \n\n\n\n# detectando parte de uma string na coluna series.name atraves de str_detect()\n# criando a coluna regioes através das condições\n# extraindo ano e mes da coluna ref.date\n# renomeando a coluna \"value\"\n# filtrando o saldo para o mes 12\n# retirando as colunas ref.date, is.num, series.name\ndf_saldoCred_regioes_alter &lt;- df_saldosCred_regioes |&gt;\n  mutate(\n  name_region = case_when(\n    str_detect(series.name, \"Sul\") ~ \"Sul\",\n    str_detect(series.name, \"Sudeste\") ~ \"Sudeste\",\n    str_detect(series.name, \"Centro-Oeste\") ~ \"Centro Oeste\",\n    str_detect(series.name, \"Nordeste\") ~ \"Nordeste\",\n    str_detect(series.name, \"Norte\") ~ \"Norte\",\n  ),\n  mes = month(ref.date),\n  ano = year(ref.date)\n  ) |&gt;\n  rename(`saldo_operações_crédito(R$ milhões)` = value) |&gt;\n  filter(mes == 12) |&gt;\n  select(-c(ref.date, id.num, series.name))\n\n\ndf_saldoCred_regioes_alter\n\n# A tibble: 65 × 4\n   `saldo_operações_crédito(R$ milhões)` name_region   mes   ano\n                                   &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;\n 1                                204754 Sul            12  2012\n 2                                242531 Sul            12  2013\n 3                                279717 Sul            12  2014\n 4                                299153 Sul            12  2015\n 5                                312257 Sul            12  2016\n 6                                332203 Sul            12  2017\n 7                                361708 Sul            12  2018\n 8                                401493 Sul            12  2019\n 9                                447881 Sul            12  2020\n10                                537545 Sul            12  2021\n# ℹ 55 more rows\n\n\n\n\n\n\n# criando lista para códigos dos saldo das operações de crédito\nids_inad &lt;- c(\"Inadimplencia nas Operações de Crédito - Sul\" = 15892,\n              \"Inadimplencia nas Operações de Crédito - Sudeste\" = 15891,\n              \"Inadimplencia nas Operações de Crédito - Centro-Oeste\" = 15890,\n              \"Inadimplencia nas Operações de Crédito - Nordeste\" = 15889,\n              \"Inadimplencia nas Operações de Crédito - Norte\" = 15888)\n\n\n# criando df para inadimplencia em cada região\ndf_inad_regioes &lt;- get_bcb_data(ids_inad, \"2012-02-01\")\n\nℹ using sequential data fetching for 5 time periods\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Sul [id=15892] | 2012-02-01 -&gt; 2015-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Sul [id=15892] | 2015-02-01 -&gt; 2018-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Sul [id=15892] | 2018-02-01 -&gt; 2021-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Sul [id=15892] | 2021-02-01 -&gt; 2024-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Sul [id=15892] | 2024-02-01 -&gt; 2025-05-31\n\n\n✔ got data with 158 rows and 4 columns\n\n\nℹ using sequential data fetching for 5 time periods\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Sudeste [id=15891] | 2012-02-01 -&gt; 2015-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Sudeste [id=15891] | 2015-02-01 -&gt; 2018-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Sudeste [id=15891] | 2018-02-01 -&gt; 2021-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Sudeste [id=15891] | 2021-02-01 -&gt; 2024-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Sudeste [id=15891] | 2024-02-01 -&gt; 2025-05-31\n\n\n✔ got data with 158 rows and 4 columns\n\n\nℹ using sequential data fetching for 5 time periods\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Centro-Oeste [id=15890] | 2012-02-01 -&gt; 2015-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Centro-Oeste [id=15890] | 2015-02-01 -&gt; 2018-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Centro-Oeste [id=15890] | 2018-02-01 -&gt; 2021-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Centro-Oeste [id=15890] | 2021-02-01 -&gt; 2024-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Centro-Oeste [id=15890] | 2024-02-01 -&gt; 2025-05-31\n\n\n✔ got data with 158 rows and 4 columns\n\n\nℹ using sequential data fetching for 5 time periods\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Nordeste [id=15889] | 2012-02-01 -&gt; 2015-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Nordeste [id=15889] | 2015-02-01 -&gt; 2018-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Nordeste [id=15889] | 2018-02-01 -&gt; 2021-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Nordeste [id=15889] | 2021-02-01 -&gt; 2024-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Nordeste [id=15889] | 2024-02-01 -&gt; 2025-05-31\n\n\n✔ got data with 158 rows and 4 columns\n\n\nℹ using sequential data fetching for 5 time periods\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Norte [id=15888] | 2012-02-01 -&gt; 2015-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Norte [id=15888] | 2015-02-01 -&gt; 2018-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Norte [id=15888] | 2018-02-01 -&gt; 2021-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Norte [id=15888] | 2021-02-01 -&gt; 2024-02-01\n\n\nℹ Fetching Inadimplencia nas Operações de Crédito - Norte [id=15888] | 2024-02-01 -&gt; 2025-05-31\n\n\n✔ got data with 158 rows and 4 columns\n\n\nℹ \n\n\n\n# detectando parte de uma string na coluna series.name atraves de str_detect()\n# criando a coluna regioes através das condições\n# extraindo ano e mes da coluna ref.date\n# renomeando a coluna \"value\"\n# filtrando o saldo para o mes 12\n# retirando as colunas ref.date, is.num, series.name\ndf_inad_regioes_alter &lt;- df_inad_regioes |&gt;\n  mutate(\n  name_region = case_when(\n    str_detect(series.name, \"Sul\") ~ \"Sul\",\n    str_detect(series.name, \"Sudeste\") ~ \"Sudeste\",\n    str_detect(series.name, \"Centro-Oeste\") ~ \"Centro Oeste\",\n    str_detect(series.name, \"Nordeste\") ~ \"Nordeste\",\n    str_detect(series.name, \"Norte\") ~ \"Norte\",\n  ),\n  mes = month(ref.date),\n  ano = year(ref.date)\n  ) |&gt;\n  rename(`inadimplencia_operações_crédito(%)` = value) |&gt;\n  filter(mes == 12) |&gt;\n  select(-c(ref.date, id.num, series.name))\n\n\ndf_inad_regioes_alter\n\n# A tibble: 65 × 4\n   `inadimplencia_operações_crédito(%)` name_region   mes   ano\n                                  &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;\n 1                                 3.58 Sul            12  2012\n 2                                 2.81 Sul            12  2013\n 3                                 2.51 Sul            12  2014\n 4                                 3.08 Sul            12  2015\n 5                                 2.65 Sul            12  2016\n 6                                 2.41 Sul            12  2017\n 7                                 2.25 Sul            12  2018\n 8                                 2.5  Sul            12  2019\n 9                                 1.92 Sul            12  2020\n10                                 2.11 Sul            12  2021\n# ℹ 55 more rows\n\n\n\n\n\n\n# chamando biblioteca geobr com dados espaciais do brasil\n# sf para plotagem de mapas\nlibrary(geobr)\n\nWarning: pacote 'geobr' foi compilado no R versão 4.4.3\n\n\nCarregando namespace exigido: sf\n\nlibrary(sf)\n\nWarning: pacote 'sf' foi compilado no R versão 4.4.3\n\n\nLinking to GEOS 3.13.0, GDAL 3.10.1, PROJ 9.5.1; sf_use_s2() is TRUE\n\n\n\n# trabalhando com os dados de saldo das operações de crédito\nmapa_regiao &lt;- read_region(year = 2020)\n\nUsing year/date 2020\n\n\n\n# left join com regiao para mesclar as tabelas de operações e dados geoespaciais\ndf_saldoCred_regioes_geo &lt;- mapa_regiao |&gt;\n  left_join(df_saldoCred_regioes_alter, by = \"name_region\")\n\n\nggplot(filter(df_saldoCred_regioes_geo, ano == 2024)) +\n  geom_sf(aes(fill = `saldo_operações_crédito(R$ milhões)`))\n\n\n\n\n\n\n\n\n\n\n\n\n# chamando bibliotecas necessárias interatividade\nlibrary(ggiraph) # programa a interatividade\n\nWarning: pacote 'ggiraph' foi compilado no R versão 4.4.3\n\nlibrary(patchwork) # une diferentes tipos de gráficos\n\nWarning: pacote 'patchwork' foi compilado no R versão 4.4.3\n\n\n\n# criando mapa base para a interatividade\np1 &lt;- ggplot() +\n  geom_sf(data = filter(df_saldoCred_regioes_geo, ano == 2024),\n          fill = \"lightgrey\", color = \"lightgrey\") +\n  geom_sf_interactive(data = filter(df_saldoCred_regioes_geo, ano == 2024),\n                      aes(fill = name_region,\n                          tooltip = name_region,\n                          data_id = name_region)) +\n  coord_sf(crs = st_crs(3857)) +\n  theme_void() +\n  theme(\n    axis.title.x = element_blank(),\n    axis.title.y = element_blank(),\n    legend.position = \"none\"\n  )\n\n\n# criando geom_col com os valores de cada regiao\np2 &lt;- ggplot(df_saldoCred_regioes_geo, \n                          aes(\n                            x = reorder(name_region, `saldo_operações_crédito(R$ milhões)`),\n                            y = `saldo_operações_crédito(R$ milhões)`,\n                            tooltip = name_region,\n                            data_id = name_region,\n                            fill = name_region)\n                          ) +\n  geom_col_interactive(data = filter(df_saldoCred_regioes_geo, ano == 2024)) +\n  coord_flip() + \n  theme_minimal() +\n  theme(\n    axis.title.x = element_blank(),\n    axis.title.y = element_blank(),\n    legend.position = \"none\"\n  )\n\n\n# combinando os dois gráficos \ncombined_plot &lt;- p1 + p2\n\n\n# criando a interatividade\nmapa_int &lt;- girafe(ggobj = combined_plot)\nmapa_int &lt;- girafe_options(\n  mapa_int,\n  opts_hover(css = \"fill:red;stroke:black\")\n) \n\n\nmapa_int"
  },
  {
    "objectID": "apresentacao_bc.html",
    "href": "apresentacao_bc.html",
    "title": "Análise de Endividamento e Inadimplência",
    "section": "",
    "text": "O presente trabalho se dedica à análises simples nas taxas de endividamento das famílias brasileiras e na taxa de inadimplência das pessoas físicas nas operações de crédito. Os dados foram extraidos do Sistema Gerenciador de Séries Temporais do Banco Central (SGS)\n\n\n\nO código utilizado para esta análise foi o 29037 extraído do SGS. A informação retorna as taxas de endividamento das famílias brasileiras com o Sistema Financeiro Nacional de acordo com a renda acumulada nos últimos doze meses. A série temporal escolhida foi de 2012 a 2025, sendo que as medições são feitas de forma mensal."
  },
  {
    "objectID": "apresentacao_bc.html#endividamento-das-famílias-brasileiras",
    "href": "apresentacao_bc.html#endividamento-das-famílias-brasileiras",
    "title": "Análise de Endividamento e Inadimplência",
    "section": "",
    "text": "O código utilizado para esta análise foi o 29037 extraído do SGS. A informação retorna as taxas de endividamento das famílias brasileiras com o Sistema Financeiro Nacional de acordo com a renda acumulada nos últimos doze meses. A série temporal escolhida foi de 2012 a 2025, sendo que as medições são feitas de forma mensal."
  },
  {
    "objectID": "apresentacao_bc.html#inadimplência-de-pessoas-físicas-em-operações-de-crédito",
    "href": "apresentacao_bc.html#inadimplência-de-pessoas-físicas-em-operações-de-crédito",
    "title": "Análise de Endividamento e Inadimplência",
    "section": "",
    "text": "Os gráficos abaixo pegam como referência os dados de acordo com a região do país (códigos: 15892, 15891, 15890, 15889, 15888). Foram consideradas as taxas de inadimplência de pessoas físicas, e se entendem por operações de crédito empréstimos e finaciamentos fornecidos por instiuições financeiras. Os gráficos interagem entre si na medida em que a região selecionada destaca a posição em relação à taxa de inadimplência. Os dados são referentes ao ano de 2024."
  }
]